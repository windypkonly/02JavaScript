---
typora-root-url: img
---

## 04 操作符

### 1 运算符

#### 1.1 定义

- 运算符也叫操作符, 通过运算符可以对一个或多个值进行运算,并获取运算结果,  比如：typeof就是运算符，可以来获得一个值的类型, 它会将该值的类型以字符串的形式返回: number string boolean undefined object

#### 1.2 分类

- 功能划分
  -  算术运算符
  - 位运算符
  - 关系运算符
  - 逻辑运算符 
- 操作数个数划分
  - 单目运算(只有一个操作数 如 : i++ ),
  - 双目运算(有两个操作数 如 : a+b;),
  - 三目运算(三目运算也称为问号表达式 a>b ? 1 : 0;) 

#### 1.3 运算符的结合性

- JavaScript中各种运算符的结合性分为两种: 左结合性(自左至右) 和 右结合性(自右至左)

- 自左至右,即先左后右
  - 例如表达式: x - y + z;
  - 则y 应先与“-”号结合,执行 x-y 运算,然后再执行+z 的运算。 
  - 这种自左至右的结合 方向就称为“左结合性”。 

- 自右至左,即先右后左
  - 例如:如x = y = z = 10
  - 由于“=”的 右结合性,应先执行z = 10; 再执行y = z 再执行x = y运算。 

### 2 算术运算符

- 加法运算
  - 非Number类型的值进行运算时，会将这些值转换为Number然后在运算
  - 任何值和NaN做运算都得NaN
  - 任何的值和字符串做加法运算，都会先转换为字符串，然后再和字符串做拼串的操作
- 减法运算
  - 非Number类型的值进行运算时，会将这些值转换为Number然后在运算
  - 任何值和NaN做运算都得NaN
  - 字符串做减法也会转换为Number
- 乘法运算
  - 非Number类型的值进行运算时，会将这些值转换为Number然后在运算
  - 任何值和NaN做运算都得NaN
  - 字符串做乘法也会转换为Number
- 除法运算
  - 非Number类型的值进行运算时，会将这些值转换为Number然后在运算
  - 任何值和NaN做运算都得NaN
  - 字符串做除法也会转换为Number
- 取余运算
  - m%n 求余,相当于m/n 获取余数
  - 非Number类型的值进行运算时，会将这些值转换为Number然后在运算
  - 任何值和NaN做运算都得NaN
  - 字符串取余也会转换为Number

### 3 一元运算符

- 只需要一个操作数

- \+ 正号不会对数字产生任何影响

  ```dart
     var num = 123;
     num = +num;
     console.log(num); // 123
  ```

  对于非Number类型的值,会将先转换为Number，然后再运算

  ```jsx
     var bool = true;
     var res = +bool;
     console.log(res); // 1
  
     var str = "123";
     res = +str;
     console.log(res); // 123
  
     var str2 = "123abc";
     res = +str2;
     console.log(res); // NaN, 所以内部不是调用parseInt, 而是Number()函数
  
     var temp = null;
     res = +temp;
     console.log(res); // 0  
  ```

- \- 负号可以对数字进行负号的取反

```dart
  var num = 456;
  num = -num;
  console.log(num); // -456

  var result = 1 + -"2" + 3;
  console.log("result = "+result);
```

### 4 赋值运算符

- 格式: 变量 = 数据
- 赋值运算符左边只能是变量
- 多个赋值运算符可以组成赋值表达式, 赋值表达式具备右结合性

```dart
// 从右至左计算
//  先将10赋值给变量c, 然后将变量c中存储的值赋值给变量b
// 然后将变量b中存储的值赋值给变量a, 最后a,b,c存储的都是10
a = b = c = 10;   
```

- 复合赋值运算符

```dart
 += 加后赋值 变量+=表达式 如:a+=1;即a=a+1
 -= 减后赋值 变量-=表达式 如:a-=1;即a=a-1
 *= 乘后赋值 变量=表达式 如:a=1;即a=a*1
 /= 除后赋值 变量/=表达式 如:a/=1;即a=a/1
 %= 取模后赋值 变量%=表达式 如:a%=1;即a=a%1
```

- 复合赋值表达式运算 
  - 格式: 变量 复合赋值运算符 表达式; 如: a *= 1 + 2;
  - 由于赋值运算符是右结合性, 所以会先计算等号右边, 然后再进行复合运算

```dart
var value = 5;
value *= 2 - 2; // 等价于  value = 5 * (2 - 2);
console.log(value); // 0
```

### 5 自增/自减运算符

- JavaScript语言为这种操作提供了两个更为简洁的运算符,即++和--,分别叫做自增运算符和自减运算符。

- 后缀表达式:x++, x--; 先用x的当前值作为表达式的值,再进行自增自减1运算。即“先用 后变”,也就是先用变量的值参与运算,变量的值再进行自增自减变化。

```dart
   var a, b;
   a = 20;
   b = 30;
   // ++ 在后, 变量先参与其它运算, 然后再自增
  var res = (a++) + (b++);
  console.log(res); // 50

   a = 10;
   b = 20;
   // -- 在后, 变量先参与其它运算, 然后再自减
   res = (a--) + (b--);
   console.log(res); // 30
   console.log(a); // 9
   console.log(b); // 19
```

- 前缀表达式:++x, --x; 其中x表示变量名,先完成变量的自增自减1运算,再用x的值作为表 达式的值;即“先变后用”,也就是变量的值先变,再用变量的值参与运算。

```dart
 var a, b;
 a = 10;
 b = 20;
 // ++ 在前, 变量先自增, 然后再参与其它运算
 res = (++a) + (++b);
 console.log(res); // 32
 console.log(a); // 11
 console.log(b); // 21

  a = 10;
  b = 20;
  // ++ 在前, 变量先自增, 然后再参与其它运算
  res = (--a) + (--b);
  console.log(res); // 28
  console.log(a); // 9
  console.log(b); // 19
```

### 6 逻辑运算符

#### 6.1 &&（与运算）

- 格式： 条件A && 条件B 
-  运算结果：只有当条件A和条件B都成立时，结果才为true；其余情况的结果都为false。因此，条件A或条件B只要有一个不成立，结果都为false
-  逻辑与运算过程 ：
  -  先判断条件A是否成立;
  - 如果条件A成立，再判断条件B是否成立：如果条件B成立，“条件A && 条件B”的结果就为true，如果条件B不成立，结果就为false;
  - 如果条件A不成立，就不会去判断条件B是否成立：因为条件A已经不成立了，不管条件B如何结果肯定是false;
  - 如果两个值都是true则返回true;

- 短路测试

```dart
   //第一个值为true，会检查第二个值
   true && alert("我来了！！");

   //第一个值为false，不会检查第二个值
   false && alert("我没有来！！");
```

- 注意点：
  - 对于非Boolean类型的数值, 逻辑与会自动将其转换为Boolean类型来判断
  - 如果条件A不成立, 则返回条件A的数值本身
  - 如果条件A成立, 不管条件B成不成立都返回条件B数值本身 

```dart
   var result =  "123" && "abc";
   console.log(result); // "abc"
   result =  "123" && 0;
   console.log(result); // 0
   result =  null && 0;
   console.log(result); // null
```

####  6.2 ||(或运算) 

- 格式: 条件A || 条件B
- 运算结果：当条件A或条件B只要有一个成立时（也包括条件A和条件B都成立），结果就为true；只有当条件A和条件B都不成立时，结果才为false
- 逻辑或运算过程：
  - 如果条件A成立，就不会再去判断条件B是否成立：因为条件A已经成立了，不管条件B如何结果肯定是1，也就是true
  - 如果条件A不成立，接着再判断条件B是否成立：如果条件B成立，“条件A || 条件B”的结果就为true，如果条件B不成立，结果就为false
- 短路测试

```dart
//第一个值为false，则会检查第二个值
  false || alert("123");

//第一个值为true，则不再检查第二个值
  true || alert("123");
```

- 注意点：
  - 对于非Boolean类型的数值, 逻辑或自动会将其转换为Boolean类型来判断
  - 如果条件A不成立, 则不管条件B成不成立都返回条件B数值本身
  - 如果条件A成立, 则返回条件A的数值本身

```dart
	var  result =  null || 0;
	console.log(result); // 0
	
	result =  "123" || "abc";
	console.log(result); // "123"
	result =  "123" || 0;
	console.log(result); // "123"
```

#### 6.3  !(非运算) 

- 格式：! 条件A
- 运算结果：对条件A进行取反：若条件A成立，结果就为false；若条件A不成立，结果就为true。也就是说：真的变假，假的变真。
- 注意点：
  - 对一个值进行两次取反，它不会变化
  - 对非布尔值进行操作，则会将其转换为布尔值，然后再取反

### 7 关系运算符

- 在JavaScript已经给我们定义好了一个Boolean类型的值, 取值是true和false, true代表真, false代表假

- 而关系运算符的返回值正好就是Boolean类型的值, 也就是说关系运算符的返回值要么是true,要么是false

- 关系运算符

  ![1577325760197](/1577325760197.png)

- 对于非数值进行比较时，会将其转换为数值然后在比较

```dart
    console.log(1 > true);
    console.log(1 >= false);
    console.log(1 > "0"); 
    console.log(1 > null);
    console.log(1 > true); //false
    console.log(1 >= false); //true
    console.log(1 > "0"); //true
    console.log(1 > null); //true
```

- 如果符号两侧的值都是字符串时，不会将其转换为数字进行比较, 而会分别比较字符串中字符的Unicode编码 
  - 比较字符编码时是一位一位进行比较
  - 如果两位一样，则比较下一位，所以借用它来对英文进行排序
  - 比较中文时没有意义
- null、undefined 、NaN比较

```dart
    console.log(null == 0); // false
    console.log(undefined == 0); // false
    // 永远不要判断两个NaN是否相等
    console.log(NaN == NaN); // false

    /*
     * 可以通过isNaN()函数来判断一个值是否是NaN
     *    如果该值是NaN则返回true，否则返回false
     */
    var num = NaN;
    console.log(isNaN(num)); // true

    // undefined 衍生自 null, 所以返回true
    console.log(null == undefined); // true;
    console.log(null === undefined); // false;

    // == 判断值是否相等
    // == 会进行数据类型转换
    console.log("123" == 123); // true
    // === 判断值和类型时候同时相等
    // === 不会进行数据类型转换
    console.log("123" === 123); // false  
```

- 注意
  - 比较两个字符串型的数字，可能会得到不可预期的结果
  - 所以, 在比较两个字符串型的数字时，一定要转型
  - console.log("1111123" < "124");

### 8 逗号运算符

- 在JavaScript中逗号“,”也是一种运算符,称为逗号运算符。 其功能是把多个表达式连接起来组成一个表达式, 称为逗号表达式。
  - 一般形式形式:　表达式1，表达式2，… …，表达式n;
  - 例如: a = 1 + 1,b = 3 * 4, c = 10 / 2;

- 求值过程
  - 表达式1，表达式2，… …，表达式n;
  - 逗号表达式的运算过程是：先算表达式1，再算表达式2，依次算到表达式n
  - 整个逗号表达式的值是最后一个表达式的值使用注意

```dart
  var a, b, c, d;
   /*
  1.先计算表达式1, a = 2
  2.再计算表达式2, b = 12
  3.再计算表达式3, c = 5
  4.将表达式3的结果返回给d
  */
  d = (a = 1 + 1,b = 3 * 4, c = 10 / 2);
  console.log(d); // 5
```

- 使用注意：
  - 程序中使用逗号表达式, 通常是要分别求逗号表达式内各表达式的值,并不一定要求整个逗号表达式的值。
  - 并不是在所有出现逗号的地方都组成逗号表达式,例如在变量说明中,函数参数表中逗号只是用作各变量之间的间隔符。

```dart
    var a, b, c;  //这里的逗号只是分隔符
    function sendMessage(num, content) { //这里的逗号只是分隔符
           console.log(num, content);
    }
```

### 9 三目运算符(条件运算符)

- 格式: 条件表达式 ? 语句1 : 语句2;
- 求值规则

```dart
    如果条件表达式为true，则执行语句1，并返回执行结果
    如果条件表达式为false，则执行语句2，并返回执行结果
    // 弹语句1
    true?alert("语句1") : alert("语句2");
    // 弹语句2 
    false?alert("语句1") : alert("语句2");
```

- 注意点
  - 条件运算符?和:是一对运算符,不能分开单独使用
  - 如果条件的表达式的求值结果是一个非布尔值, 会将其转换为布尔值然后在运算

```dart
	// 弹语句2 
	null?alert("语句1") : alert("语句2");
	// 弹语句1
	"abc"?alert("语句1") : alert("语句2");
```

### 10 运算符的优先级

- JavaScript中,运算符的运算优先级共分为15 级。1 级最高,15 级最低。
- 在表达式中,优先级较高的先于优先级较低的进行运算。
  - 先计算优先级高的
  - 优先级相同则左结合计算
  - 可以使用()来改变优先级

![image-20191226181022900](/image-20191226181022900.png)
